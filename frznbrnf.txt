PROJECT=cuco-ui-cct-common bash scripts/run_small.sh
[run_small] Validating setup...
============================================================
Requirements Extraction Pipeline - Setup Validation
============================================================

Checking code structure...
✓ Configuration module (src/config.py)
✓ Logger module (src/utils/logger.py)
✓ Ollama client (src/utils/ollama_client.py)
✓ Weaviate client (src/utils/weaviate_client.py)
✓ Step 1 agents (src/agents/step1_agents.py)
✓ Step 2 agents (src/agents/step2_agents.py)
✓ Step 3 agents (src/agents/step3_agents.py)
✓ Pipeline orchestrator (src/pipeline.py)
✓ Main entry point (main.py)
Checking imports...
✓ crewai
✓ ollama
✓ weaviate-client
✓ python-dotenv
✓ httpx

Checking configuration...
✓ Source directory: /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c
✓ Output directory: data/output
✓ Ollama model: gemma3:12b
✓ Ollama URL: http://localhost:11434
✓ Weaviate URL: http://localhost:8080

Checking external services...
✓ Ollama is accessible
✓ Weaviate is accessible

============================================================
Validation Summary
============================================================
✓ PASS: Code Structure
✓ PASS: Imports
✓ PASS: Configuration
✓ PASS: External Services

✅ All checks passed! Ready to run the pipeline.
   Run: python main.py
[run_small] Starting pipeline (small run)...
2025-11-03 11:20:07 - pipeline - INFO - Starting Requirements Extraction Pipeline
2025-11-03 11:20:07 - pipeline - INFO - Source synchronization: /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c
2025-11-03 11:20:07 - pipeline - INFO - Output directory: data/output
2025-11-03 11:20:07 - pipeline - INFO - ================================================================================
2025-11-03 11:20:07 - pipeline - INFO - STEP 1: Source Discovery & AI Extraction
2025-11-03 11:20:07 - pipeline - INFO - ================================================================================
2025-11-03 11:20:07 - pipeline - INFO - Discovered 2 files across 1 projects
2025-11-03 11:20:07 - pipeline - INFO -
Processing project: cuco-core (2 files)
2025-11-03 11:20:07 - step1_agents - INFO - Extracting from /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c/cuco-core/src/main/java/at/a1ta/cuco/core/dao/db/ServiceDao.java (java)
2025-11-03 11:20:25 - ollama_client - WARNING - Empty embedding returned from Ollama for model nomic-embed-text:latest
2025-11-03 11:20:25 - step1_agents - INFO - Stored /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c/cuco-core/src/main/java/at/a1ta/cuco/core/dao/db/ServiceDao.java in Weaviate with UUID: e31c4b60-97d1-451a-b662-df6aeb8a3016
2025-11-03 11:20:25 - step1_agents - INFO - Extracting from /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c/cuco-core/src/main/java/at/a1ta/cuco/core/dao/db/impl/ServiceDaoImpl.java (java)
2025-11-03 11:20:42 - ollama_client - WARNING - Empty embedding returned from Ollama for model nomic-embed-text:latest
2025-11-03 11:20:42 - step1_agents - INFO - Stored /mnt/cucocalcai/cuco-master/cuco-master@d34bb6b6d1c/cuco-core/src/main/java/at/a1ta/cuco/core/dao/db/impl/ServiceDaoImpl.java in Weaviate with UUID: d41738ff-b3ea-4a83-b2b9-f5069e900947
2025-11-03 11:20:42 - pipeline - INFO -
Step 1 complete. Processed 2 files.
2025-11-03 11:20:42 - pipeline - INFO - ================================================================================
2025-11-03 11:20:42 - pipeline - INFO - STEP 2: Project Structuring & Deep Analysis
2025-11-03 11:20:42 - pipeline - INFO - ================================================================================
2025-11-03 11:20:42 - pipeline - INFO -
Structuring project: cuco-core
2025-11-03 11:20:42 - pipeline - INFO - Structured data saved to data/output/cuco-core/requirements_json.json
2025-11-03 11:20:42 - pipeline - INFO -
Step 2 complete. Structured 1 projects.
2025-11-03 11:20:42 - pipeline - INFO - ================================================================================
2025-11-03 11:20:42 - pipeline - INFO - STEP 3: Requirements Synthesis & Target Solution Mapping
2025-11-03 11:20:42 - pipeline - INFO - ================================================================================
2025-11-03 11:20:42 - pipeline - INFO -
Generating requirements for: cuco-core
2025-11-03 11:21:15 - step3_agents - INFO - Requirements written to data/output/cuco-core/requirements.md
2025-11-03 11:21:47 - step3_agents - INFO - Mapping document written to data/output/cuco-core/mapping.md
2025-11-03 11:22:15 - pipeline - INFO - Requirements generated for cuco-core
2025-11-03 11:22:15 - pipeline - INFO -
Step 3 complete. Generated requirements for 1 projects.
2025-11-03 11:22:15 - pipeline - INFO -
================================================================================
2025-11-03 11:22:15 - pipeline - INFO - PIPELINE COMPLETE
2025-11-03 11:22:15 - pipeline - INFO - ================================================================================
2025-11-03 11:22:15 - pipeline - INFO - Summary saved to: data/output/pipeline_summary.json
2025-11-03 11:22:15 - main - INFO -
Pipeline execution completed successfully!
2025-11-03 11:22:15 - main - INFO - Projects processed: 1
[run_small] Running post-run diagnosis for project: cuco-ui-cct-common
 == Weaviate Diagnostics ==
WEAVIATE_URL: http://localhost:8080
Connected (SDK): False
Connected (REST): True
Collection exists: True
Vectorizer: none
Total objects in Weaviate: 10
Top projects by object count:
  - cuco-ui-cct-common: 5
  - cuco-cct-core: 3
  - cuco-core: 2

== Project Probe: cuco-ui-cct-common ==
Weaviate files (preview): 5
Weaviate files (estimated total): 5
Sample filePaths:
  - infra/cuco/administration.ui/src/main/java/TestClspgYBqb4.java
  - infra/cuco/administration.ui/src/main/java/TestClsGWP04Q3.java
  - infra/cuco/administration.ui/src/main/java/TestClsSlZCWA2.java
  - infra/cuco/administration.ui/src/main/java/TestClsEnnU0m1.java
  - infra/cuco/administration.ui/src/main/java/TestCls5jWFP20.java

== Fallback Data (Step 1) ==
fallback_file_exists: True
fallback_total_projects: 1
fallback_total_files: 2
fallback_project_files: 0
fallback_path: data/build/step1_extracted_data.json

== Heuristics ==
- Objects present via REST. SDK connection is optional for pipeline.
[run_small] Done. Key outputs:
  - data/output/pipeline_summary.json
  - data/output/*/requirements.md
  - data/output/*/mapping.md
source venv/bin/activate && ./step2_fetch.sh all 20251008_1126 true

# check 
source venv/bin/activate && python -c "
import sys
from pathlib import Path
sys.path.append(str(Path('.').absolute() / 'src'))
from store.weaviate_client import WeaviateClient
wc=WeaviateClient(ensure_schema=False)
classes=['GwtModule','GwtUiBinder','GwtActivityPlace','GwtEndpoint','JsArtifact','FrontendRoute','IbatisStatement','DaoCall','JspForm','DbTable','Flow','Requirement']
for c in classes:
    try:
        res = wc.client.query.get(class_name=c, properties=['project']).with_limit(1).do()
        hits = res.get('data',{}).get('Get',{}).get(c,[])
        print(c, 'sample', hits[:1])
    except Exception as e:
        print(c, 'err', e)
"

# ----

source venv/bin/activate && python -c "
import sys
from pathlib import Path
sys.path.append(str(Path('.').absolute() / 'src'))
from store.weaviate_client import WeaviateClient
wc=WeaviateClient(ensure_schema=False)
classes=['GwtModule','GwtUiBinder','GwtActivityPlace','GwtEndpoint','JsArtifact','FrontendRoute','IbatisStatement','DaoCall','JspForm','DbTable','Flow','Requirement']
for c in classes:
    try:
        res = wc.client.query.get(class_name=c, properties=['project']).with_limit(1).do()
        hits = res.get('data',{}).get('Get',{}).get(c,[])
        print(c, 'sample', hits[:1])
    except Exception as e:
        print(c, 'err', e)
"
# ---
source venv/bin/activate && ./step2_fetch.sh index 20251008_1126

source venv/bin/activate && ./step2_fetch.sh search 20251008_1126 "order creation" 5

# --
source venv/bin/activate && python -c "
import sys
from pathlib import Path
sys.path.append(str(Path('.').absolute() / 'src'))
from store.weaviate_client import WeaviateClient
wc=WeaviateClient(ensure_schema=False)
proj='20251008_1126'
classes=['GwtModule','GwtUiBinder']
for c in classes:
    res = wc.client.query.get(class_name=c, properties=['project','path','moduleName','text']).with_where({
        'path':['project'], 'operator':'Equal', 'valueString': proj
    }).with_limit(5).do()
    hits = res.get('data',{}).get('Get',{}).get(c,[])
    print('\n==', c, len(hits))
    for h in hits:
        print({k:v for k,v in h.items() if k in ('project','path','moduleName','text')})
"

## 
source venv/bin/activate && ./step2_fetch.sh search 20251008_1126 "DeviceAsAService" 5 && ./step2_fetch.sh search 20251008_1126 "Servlet" 5 && ./step2_fetch.sh search 20251008_1126 "Portlet" 5 && ./step2_fetch.sh search 20251008_1126 "Quote" 5 && ./step2_fetch.sh prd 20251008_1126

## 1342
source venv/bin/activate && ./step2_fetch.sh prd 20251008_1126 && ./step2_fetch.sh search 20251008_1126 "DeviceAsAService Price" 5

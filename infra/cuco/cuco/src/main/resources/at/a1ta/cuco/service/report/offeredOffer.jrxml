<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Angebot" columnCount="1" printOrder="Vertical" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="35" rightMargin="25" topMargin="30" bottomMargin="30">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="74"/>
	<template><![CDATA[$P{templateFile}]]></template>
	<parameter name="templateFile" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["\\styles.jrtx"]]></defaultValueExpression>
	</parameter>
	<parameter name="bgLogo" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["\\bg_logo_A1_black.png"]]></defaultValueExpression>
	</parameter>
	<parameter name="pkbImageUrl" class="java.lang.String" isForPrompting="false">
	</parameter>
	<field name="party" class="at.a1ta.cuco.core.shared.dto.Party"/>
	<field name="offeredOfferBean" class="at.a1ta.pkb.bean.bean.OfferedOfferBean"/>
	<variable name="inOneYear" class="java.util.Date">
		<variableExpression><![CDATA[new java.util.Date(new java.util.Date().getYear()+1, new java.util.Date().getMonth(), new java.util.Date().getDay())]]></variableExpression>
		<initialValueExpression><![CDATA[new java.util.Date(new java.util.Date().getYear()+1, new java.util.Date().getMonth(), new java.util.Date().getDay())]]></initialValueExpression>
	</variable>
	<title>
		<band/>
	</title>
	<pageHeader>
		<band height="88">
			<textField>
				<reportElement style="normal" x="0" y="0" width="450" height="14"/>
				<textElement/>
				<textFieldExpression><![CDATA[new String($F{party}.getFirstname() + " " + $F{party}.getLastname()).trim()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="normal" x="0" y="14" width="450" height="14"/>
				<textElement/>
				<textFieldExpression><![CDATA[new String($F{party}.getStreet() + " " + $F{party}.getHousenumber()).trim()]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement style="normal" x="0" y="28" width="450" height="14"/>
				<textElement/>
				<textFieldExpression><![CDATA[new String($F{party}.getPoBox() + " " + $F{party}.getCity()).trim()]]></textFieldExpression> 
			</textField>
			<image>
				<reportElement x="478" y="0" width="57" height="60"/>
				<imageExpression class="java.lang.String"><![CDATA[$P{bgLogo}]]></imageExpression>
			</image>
		</band>
	</pageHeader>
	<columnHeader>
		<band/>
	</columnHeader>
	<detail>
		<band height="84" splitType="Stretch">
			<elementGroup>
				<textField pattern="dd.MM.yyyy">
					<reportElement style="normal" x="0" y="0" width="535" height="14"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.util.Date"><![CDATA[new java.util.Date()]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="normal" x="0" y="28" width="535" height="14">
						<printWhenExpression><![CDATA[$F{party}.getGender()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA["Guten Tag, " + ($F{party}.getGender().equals("M") ? "Herr" : ($F{party}.getGender().equals("F") || $F{party}.getGender().equals("W") ? "Frau" : $F{party}.getGender())) + " " + $F{party}.getLastname() + "!"]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="normal" x="0" y="28" width="535" height="14">
						<printWhenExpression><![CDATA[$F{party}.getGender()==null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA["Guten Tag!"]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="important" x="0" y="56" width="535" height="14"/>
					<textElement/>
					<text><![CDATA[Einfach für Sie. Ihr persönliches Angebot.]]></text>
				</staticText>
			</elementGroup>
		</band>
		<band height="209" splitType="Stretch">
			<elementGroup>
				<textField isStretchWithOverflow="true">
					<reportElement positionType="Float" style="normal" x="0" y="0" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getOffer().getName()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$F{offeredOfferBean}.getOffer().getName()]]></textFieldExpression>
				</textField>
				<image onErrorType="Blank">
					<reportElement x="0" y="14" width="230" height="139" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getOffer().getImage()!=null]]></printWhenExpression>
					</reportElement>
					<imageExpression class="java.lang.String"><![CDATA[$P{pkbImageUrl}+$F{offeredOfferBean}.getOffer().getImage().getFilename()]]></imageExpression>
				</image>
				<textField isStretchWithOverflow="true">
					<reportElement positionType="Float" style="normal" x="0" y="167" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getOffer().getShortText()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$F{offeredOfferBean}.getOffer().getShortText()]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement positionType="Float" style="normal" x="0" y="195" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getOffer().getDescription()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$F{offeredOfferBean}.getOffer().getDescription()]]></textFieldExpression> 
				</textField>
			</elementGroup>
		</band>
		<band height="56">
			<elementGroup>
				<textField>
					<reportElement style="normal" x="0" y="14" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getCustomer().getId()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA["Ihre Kundennummer ist: " + $F{offeredOfferBean}.getCustomer().getId()]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="normal" x="0" y="28" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getPhoneNumber()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA["Ihre Rufnummer ist: " + $F{offeredOfferBean}.getPhoneNumber()]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement style="normal" x="0" y="42" width="535" height="14" isRemoveLineWhenBlank="true">
						<printWhenExpression><![CDATA[$F{offeredOfferBean}.getAonNumber()!=null]]></printWhenExpression>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA["Ihre Aon-Nummer ist: " + $F{offeredOfferBean}.getAonNumber()]]></textFieldExpression>
				</textField>
			</elementGroup>
		</band>
		<band height="112" splitType="Stretch">
			<elementGroup>
				<textField>
					<reportElement style="normal" x="0" y="14" width="535" height="14">
						<printWhenExpression><![CDATA[Boolean.valueOf($F{party}.getId() >= 0 && $F{offeredOfferBean}.getInitiative().getActiveEnd() != null)]]></printWhenExpression>
					</reportElement>
					<textFieldExpression><![CDATA["Dieses besondere Angebot ist bis " + ($F{offeredOfferBean}.getInitiative().getActiveEnd().after($V{inOneYear}) ? "auf Widerruf" : new SimpleDateFormat("dd.MM.yyyy").format($F{offeredOfferBean}.getInitiative().getActiveEnd())) + " für Sie reserviert."]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement style="normal" x="0" y="42" width="535" height="14"/>
					<text><![CDATA[Sie können es unter www.A1.net/gutschein, im A1 Shop oder im ausgewählten Fachhandel einlösen.]]></text>
				</staticText>
				<staticText>
					<reportElement style="normal" x="0" y="70" width="535" height="14"/>
					<textElement/>
					<text><![CDATA[Greifen Sie schnell zu!]]></text>
				</staticText>
				<staticText>
					<reportElement style="normal" x="0" y="98" width="535" height="14"/>
					<textElement/>
					<text><![CDATA[Ihr A1 Team]]></text>
				</staticText>
			</elementGroup>
		</band>
	</detail>
	<columnFooter>
		<band/>
	</columnFooter>
	<pageFooter>
		<band/>
	</pageFooter>
	<summary>
		<band/>
	</summary>
</jasperReport>
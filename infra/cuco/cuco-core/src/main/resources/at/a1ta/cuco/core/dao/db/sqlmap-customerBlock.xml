<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
  PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
  "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="CustomerBlock">

  <typeAlias alias="customerBlock" type="at.a1ta.cuco.core.shared.dto.CustomerBlock" />

  <resultMap class="customerBlock" id="customerBlock-result">
    <result property="id" column="kundenblock_id" />
    <result property="name" column="name" />
    <result property="count" column="anzahl" />
    <result property="imported" column="import" />
    <result property="data" column="data" />
    <result property="flashInfo.id" column="flash_id"/>
  </resultMap>

  <select id="getForFlashInfo" parameterClass="long" resultMap="customerBlock-result">
    SELECT * FROM cuco_kundenblock
    WHERE flash_id = #id#
  </select>
  
  <select id="get" parameterClass="long" resultMap="customerBlock-result">
    SELECT * FROM cuco_kundenblock
    WHERE kundenblock_id = #id#
  </select>
  
  <insert id="insert" parameterClass="customerBlock">
    <selectKey type="pre" keyProperty="id">SELECT seq_cuco_kundenblock.nextval FROM DUAL</selectKey>
    INSERT INTO cuco_kundenblock VALUES (#id#,#name#,#count#,#imported#,#data#,#flashInfo.id#)
  </insert>
  
  <update id="update" parameterClass="customerBlock">
    UPDATE cuco_kundenblock SET
      name = #name#,
      anzahl = #count#,
      data = #data#
    WHERE kundenblock_id = #id#
  </update>
  
  <delete id="delete" parameterClass="long">
    DELETE FROM cuco_kundenblock WHERE kundenblock_id = #id#
  </delete>
</sqlMap>
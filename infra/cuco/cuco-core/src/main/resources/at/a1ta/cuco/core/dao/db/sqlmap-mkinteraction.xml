<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
  PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
  "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="MKInteraction">

	<cacheModel id="mkInteraction-cache" type="ehcacheProvider" readOnly="true" serialize="false">
		<flushInterval hours="3" />
		<property name="cache-size" value="1000" />
	</cacheModel>

	<resultMap id="mkInteraction-result" class="at.a1ta.bite.data.clarify.shared.dto.CustomerInteraction">
		<result property="customerId" column="KUNDE_ID" />
		<result property="startDate" column="ENTSTEHUNG_DAT" />
		<result property="direction" column="RICHTUNG" />
		<result property="duration" column="DAUER" />
		<result property="interactionType" column="TYP" />
		<result property="productName" column="PRODUKT" />
		<result property="reason01" column="GRUND1" />
		<result property="reason02" column="GRUND2" />
		<result property="reason03" column="GRUND3" />
		<result property="result" column="RESULTAT" />
		<result property="notes" column="INTERACT_NOTES" />
	</resultMap>
	
	<select id="GetInteractionsByCustomerId" resultMap="mkInteraction-result" parameterClass="java.lang.Long" cacheModel="mkInteraction-cache">
		SELECT * FROM v_mk_interaktion WHERE kunde_id=#customerId#
	</select>

</sqlMap>

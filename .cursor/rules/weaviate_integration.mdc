# Weaviate Integration Rules

## Schema Design
- Use the exact class names from iteration15-2.md: JavaCodeChunks, DocumentationChunks, BusinessRules, IntegrationPoints, UIComponents, NavigationFlows
- All classes must use text2vec-ollama vectorizer with configurable model
- Include all required properties as specified in the schema definitions
- Use proper data types: text, text[], int, number, boolean

## Chunking Strategy
- Repository/Project summaries: 50-100KB text
- Module/Package chunks: 20-50KB
- File-level chunks: 8-25KB
- Class/Interface chunks: 2-8KB
- Method/Function chunks: 0.5-2KB
- UI/GWT chunks: 2-8KB + Navigation chunks: 5-15KB
- Use 10-20% overlap where helpful for continuity

## Metadata Requirements
- Every chunk must have: file_path, project_name, chunk_kind, language, start_line, end_line
- Optional but recommended: class_name, function_name, architectural_layer, business_domain, complexity_score
- Include parent_refs and child_refs arrays for cross-references
- Store repository_context for broader understanding

## Batch Processing
- Use WEAVIATE_BATCH_SIZE for upserts (default 256)
- Implement retry logic with exponential backoff
- Handle batch failures by splitting into smaller batches
- Log failed upserts to dead-letter file